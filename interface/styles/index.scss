$height_shown_header: 45px;

@mixin body_mixin($color_palette) {
  $color0: map-get($color_palette, color0);
  $color1: map-get($color_palette, color1);
  $color2: map-get($color_palette, color2);
  $color3: map-get($color_palette, color3);
  $color4: map-get($color_palette, color4);
  $col_values: map-get($color_palette, col_values);
  $col_font_black: map-get($color_palette, col_font_black);
  $col_font_white: map-get($color_palette, col_font_white);
  body {
    background-color: $color0;
    margin: 0;
    height: 100%;
    div#alert_timeout {
      display: none;
      width: 100%;
      background-color: darkred;
      color: $col_font_white;
      font-size: 15pt;
    }
    div#header {
      width: 100%;
      top: 0;
      position: fixed;
      background-color: $color2;
      color: $col_font_white;
      div#header_on_shown {
        height: $height_shown_header;
        display: flex;
        align-items: center;
        div#menu_title {
          padding-left: 10pt;
          padding-right: 10pt;
          display: flex;
          align-items: center;
          img {
            display: inline-block;
            height: 20pt;
            margin-right: 3pt;
          }
          div {
            transform: translateY(2pt);
            display: inline-block;
            height: fit-content;
            font-size: 20pt;
          }
        }
        div#header_buttons {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          div.header_button {
            margin: 5pt;
            padding: 5px 5px 2px 5px;
            &:hover {
              background-color: rgba(255, 255, 255, 0.25);
              cursor: pointer;
            }
            &.displayed {
              border-bottom: 2px solid white;
            }
            &:not(.displayed) {
              padding-bottom: 2px;
            }
          }
        }
      }
      div#header_on_hidden {
        &:hover {
          text-align: center;
          height: $height_shown_header;
          font-size: 20pt;
        }
        &:not(:hover) {
          font-size: 10pt;
        }
      }
    }
    div#main {
      margin-top: $height_shown_header;
      height: 100%;
      div#main_graphs {
        display: flex;
        height: 100%;
        div#indicators {
          width: 20%;
          background-color: $color4;
          height: 100%;
        }
        div#graphs {
          width: 80%;
          display: flex;
          flex-direction: row;
          align-content: start;
          flex-wrap: wrap;
          div.container {
            width: 33%;
            background-color: $color0;
            height: min-content;
          }
        }
        div#large_graphs {
          width: 0em; // 初回読み込み時は0にすることでdiv#graphsのwidthを定めさせる
        }
        div.labels {
          span.name {
            font-size: 15pt;
            color: $col_font_black;
          }
          span.value {
            display: inline-block;
            text-align: right;
            justify-content: center;
            min-width: 75pt;
            height: 25pt;
            font-size: 20pt;
            color: $col_font_black;
          }
          span.unit {
            font-size: 10pt;
            color: $col_font_black;
          }
        }
        div.indicator {
          border-left: 3px solid transparent;
          padding: 2px;
          margin-top: 5pt;
          &.danger {
            animation: alert 0.65s ease-in-out infinite;
          }
          &.safe {
            background-color: $color4;
          }
        }
        div#timestamp_insert {
          background-color: $color2;
          position: fixed;
          bottom: 0;
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;

          width: 100%;
          div.timestamp {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            input {
              margin: 2pt;
              border-radius: 4pt;
              &.ts_text {
                width: 100%;
                height: 20px;
                border: none;
              }
              &.ts_submit {
                width: auto;
                background-color: $color3;
                font-size: 10pt;
                cursor: pointer;
                color: $col_font_white;
                &:hover {
                  border: 2px solid white;
                }
                &:not(:hover) {
                  border: 2px solid $color3;
                }
                &:active {
                  transform: translateY(4px);
                }
              }
            }
          }
        }
      }
      div#main_connection_settings {
        width: 100%;
        table {
          width: 100%;
          height: 100%;
          margin: 10px;
          border-collapse: collapse;
          thead {
            td {
              padding-left: 5px;
              min-height: 75px;
            }
            background-color: $color1;
            color: $col_font_white;
          }
          tbody {
            tr {
              height: 15%;
              &:hover {
                background-color: rgba(0, 0, 0, 0.1);
              }
              td {
                border-bottom: $color1 solid 1px;
                padding-top: 5px;
                padding-bottom: 20px;
                &.info {
                  width: 30%;
                }
                &.preview {
                  width: 70%;
                }
                div.name {
                  font-size: 25px;
                  color: $col_font_black;
                }
                div.type {
                  font-size: 15px;
                  color: $col_font_black;
                }
                div.address {
                  font-size: 15px;
                  color: $col_font_black;
                }
                div.connection_button {
                  width: auto;
                  font-size: 20px;
                  margin: 5px 5px 5px 0px;
                  padding: 0px 0px 0px 5px;
                  border: 1px solid transparent;
                  &:hover {
                    border-color: $color3;
                    color: $col_font_white;
                    background-color: $color3;
                  }
                  &:not(:hover) {
                    border-color: $color3;
                    color: $color3;
                    background-color: $color0;
                  }
                  &:active {
                    transform: translateY(2px);
                  }
                }
                div.raw_received_label {
                  padding-left: 5px;
                  font-size: 12px;
                  height: 20%;
                  color: $col_font_black;
                }
                div.raw_received {
                  color: $col_font_black;
                  padding-left: 5px;
                  height: 80%;
                  overflow: auto;
                  font-size: 10px;
                  word-break: break-word;
                  &::-webkit-scrollbar {
                    width: 5px;
                    background-color: white;
                  }
                  &::-webkit-scrollbar-thumb {
                    width: 5px;
                    background-color: $color1;
                  }
                }
              }
            }
          }
        }
      }
      div#main_display_settings {
        width: 100%;
        display: flex;
        flex-direction: column;
        div.table_container {
          margin: 10px;
          span.table_title {
            display: block;
            color: $col_font_black;
            font-size: 20px;
          }
          table {
            margin-bottom: 20px;
            width: 100%;
            border-collapse: collapse;
            input {
              border: none;
              height: 100%;
              width: calc(100% - 10px);
              font-size: 20px;
              margin: 5px;
              background-color: $color0;
              color: $col_font_black;
            }
            tr {
              &:hover {
                background-color: rgba(0, 0, 0, 0.1);
              }
              td {
                min-width: 75px;
                padding-left: 5px;
                border-spacing: 0;
                border-bottom: $color1 solid 1px;
              }
            }
            thead {
              background-color: $color1;
              color: $col_font_white;
            }
            tbody {
              color: $col_font_black;
              min-height: 25px;
            }
          }
        }
      }
      div.container_footer {
        // 共通コンポーネント：各画面のフッター部分
        width: 100%;
        background-color: $color2;
        position: fixed;
        bottom: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        animation: jump_up 0.25s ease-in-out;
        span.message {
          max-width: 82.5%;
          padding-left: 10px;
          text-align: left;
          color: $col_font_white;
          font-size: 12px;
        }
        div.button {
          text-align: right;
          margin: 5px;
          padding: 2px 10px;
          border-radius: 5px;
          border: transparent 2px solid;
          &:hover {
            border-color: $col_font_white;
            color: $col_font_white;
            background-color: $color3;
          }
          &:not(:hover) {
            border-color: $color3;
            color: $color3;
            background-color: $color0;
          }
          &:active {
            transform: translateY(2px);
          }
        }
      }
    }
    div#footer {
      height: 0;
      background-color: $color2;
    }
  }

  canvas {
    width: 100pt;
    height: 100pt;
  }

  @keyframes alert {
    0% {
      background-color: rgba(255, 0, 0, 0.3);
    }
    100% {
      background-color: rgba(255, 0, 0, 0.01);
    }
  }

  @keyframes jump_up {
    0% {
      transform: translateY(5px);
    }
    100% {
      transform: translateY(0);
    }
  }

  ::-webkit-scrollbar {
    // スクロールバーを見せない
    width: 0px;
    height: 0px;
  }
}

html {
  user-select: none;
  height: 100%;
  &.light {
    $color_palette: (
      color0: #eeeeee,
      color1: #393e46,
      color2: #222831,
      color3: #00adb5,
      color4: #cfcfcf,
      col_values: #4313b4,
      col_font_black: black,
      col_font_white: white,
    );
    @include body_mixin($color_palette);
  }
  &.dark {
    $color_palette: (
      color0: rgb(35, 35, 35),
      color1: rgb(50, 50, 50),
      color2: rgb(30, 30, 40),
      color3: rgb(0, 190, 200),
      color4: rgb(55, 55, 55),
      col_values: #4313b4,
      col_font_black: white,
      col_font_white: white,
    );
    @include body_mixin($color_palette);
  }
}
